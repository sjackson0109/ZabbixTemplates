zabbix_export:
  version: '7.0'
  date: '2023-10-15T12:00:00Z'
  groups:
    - uuid: 846977d1dfed4968bc5f8bdb839e05db
      name: Storage
  templates:
    - uuid: 6622867ea11544a0a59215d9ef03045d
      template: 'Dell Unity Arrays'
      name: 'Dell Unity Arrays'
      description: 'Template for monitoring EMC Unity XT series storage arrays using the REST API.'
      groups:
        - name: Storage
      items:
        - uuid: a918d42dbbe9462b88d9b8ca7a8c040c
          name: 'Get Discovery Data'
          type: EXTERNAL
          key: 'get_unity_metrics.py[\"--api_ip={HOST.IP}\",\"--api_port={\}\",\"--api_user={\}\",\"--api_password={\}\",\"--storage_name={HOST.NAME}\",\"--discovery\"]'
          delay: 15m
          history: 90d
          trends: 365d
          value_type: TEXT
          description: 'Executes the discovery script to fetch resource data from the Unity storage array.'
          timeout: 3s
      macros:
        - macro: '{\}'
          value: ''
        - macro: '{\}'
          value: '443'
        - macro: '{\}'
          value: ''
      triggers:
        - uuid: 1a2b3c4d5e6f7890123456789abcdef0
          name: '{HOST.NAME} -> Error occurs in getting metrics'
          expression: 'count(/Dell Unity Arrays/get_unity_metrics.py[\"--api_ip={HOST.IP}\",\"--api_port={\}\",\"--api_user={\}\",\"--api_password={\}\",\"--storage_name={HOST.NAME}\",\"--discovery\"],30m,\"le\",\"2\")>5'
          priority: HIGH
          description: 'Errors in zabbix-sender. Values 1 or 2 occur more than 5 times in 30 minutes.'

# Agent Web Checks
UserParameter=agent.web.available[*],powershell.exe -NoProfile -ExecutionPolicy Bypass -File "C:\Program Files\Zabbix Agent 2\Scripts\agent_web_check.ps1" -Url "$1" -Timeout "$2" -ExpectCode "$3" | ConvertFrom-Json | Select-Object -ExpandProperty available
UserParameter=agent.web.latency[*],powershell.exe -NoProfile -ExecutionPolicy Bypass -File "C:\Program Files\Zabbix Agent 2\Scripts\agent_web_check.ps1" -Url "$1" -Timeout "$2" -ExpectCode "$3" | ConvertFrom-Json | Select-Object -ExpandProperty time_ms
UserParameter=agent.web.code[*],powershell.exe -NoProfile -ExecutionPolicy Bypass -File "C:\Program Files\Zabbix Agent 2\Scripts\agent_web_check.ps1" -Url "$1" -Timeout "$2" -ExpectCode "$3" | ConvertFrom-Json | Select-Object -ExpandProperty status
UserParameter=agent.web.content[*],powershell.exe -NoProfile -ExecutionPolicy Bypass -File "C:\Program Files\Zabbix Agent 2\Scripts\agent_web_check.ps1" -Url "$1" -Timeout "$2" -ExpectCode "$3" -ExpectContent "$4" | ConvertFrom-Json | Select-Object -ExpandProperty content_match
#Zabbix Agent [add this to the bottom of the file]
# This configuration file is used to set up custom user parameters for the Zabbix agent.
# Ensure the paths to the scripts are correct and that the scripts have the necessary permissions to execute.
# Agent Ping Boolean (Availability)
UserParameter=agent.ping[*],powershell.exe -NoProfile -ExecutionPolicy Bypass -File "C:\Program Files\Zabbix Agent 2\Scripts\agent_ping_check_bool.ps1" -Ip "$1" -Count "$2" -Timeout "$3" -BufferSize "$4" -TimeToLive "$5" -DontFragment "$6"
# Agent Ping Latency
UserParameter=agent.ping.latency[*],powershell.exe -NoProfile -ExecutionPolicy Bypass -File "C:\Program Files\Zabbix Agent 2\Scripts\agent_ping_check.ps1" -Ip "$1" -Count "$2" -Timeout "$3" -BufferSize "$4" -TimeToLive "$5" -DontFragment "$6"